{% extends "front/base.html" %}
    {% block title %}产品{{ product.id }}：{{ product.name }}{% endblock %} 
    
    {% block css %}
        {{ super() }}
        <link href="/static/css/1-col-portfolio.css" rel="stylesheet">
    {% endblock %}

    {% block content %}
        <!-- Page Heading -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">产品详情</h1>
            </div>
        </div>
        <!-- /.row -->

        <!-- Project One -->
        <div class="row">
            <div class="col-md-5">
                <img class="img-responsive" src="{{ product.img }}" alt="">
            </div>
            <div class="col-md-7">
                <h3>{{ product.name }}</h3>
                &nbsp;
                <h4>详情介绍</h4>
                <table class="table" style="width:350px;">
						
						<tbody>
							<tr>
								<td>商品名称</td>
								<td>{{ product.name }}</td>
							</tr>
							<tr>
								<td>商品编号</td>
								<td>{{ product.id }}</td>
							</tr>
							<tr>
								<td>商品类型</td>
								<td>{{ product.category }}</td>
							</tr>
							<tr>
								<td>商品来源</td>
								<td>{{ product.made_in }}</td>
							</tr>
						</tbody>
					</table>
					<p>价格：<b style="color:red;">￥{{ product.price }}</b>&nbsp;&nbsp;&nbsp;&nbsp;库存：<span class="span" style="color:red">{{ product.quantity }}</span>件&nbsp;&nbsp;&nbsp;&nbsp;
						<input id="quantity" type="number" min="1" max="{{ product.quantity }}" style="width:50px;" value="1">
						<button onclick="addToTrolley();" class="btn btn-default" role="button">加购物车</button></p>
            </div>
        </div>
        <!-- /.row -->

        <hr>

        <hr>
    {% endblock %}

    {% block js%}
        {{ super() }}
        <script>
            function addToTrolley(){
                user = "{{ current_user.name }}";
                if (!user){
                    window.location.href="{{ url_for('auth.login') }}";
                }
                id = {{ product.id }};
                quantity = $("#quantity").val();
                data = {"product_id": id, "product_quantity": parseInt(quantity)}
                $.ajax({
                    url: "/apis/open/trolley/",
                    type: "post",
                    data: JSON.stringify(data),
                    contentType: "application/json",
                    dataType:"json",
                    async: true,
                    success: function callback(data){
                        alert("加入购物车成功");
                        window.location.reload();
                    }
                });
            }
        </script>
    {% endblock %}
