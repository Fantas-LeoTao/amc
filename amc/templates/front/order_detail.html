{% extends "front/base.html" %}
    {% block title %}我的订单{% endblock %}

    {% block content %}
    	<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
    	
    	<div class="row" style="background-color:#eee;">
    		<!--左侧导航栏开始-->
    		<div class="col-xs-3">
    		<p>&nbsp;</p>
    			<p class="lead"></p>
                <div class="list-group" class="nav nav-tabs nav-stacked affix" data-spy="affix" data-offset-top="125">
                    <a href="{{ url_for('user.profile') }}" class="list-group-item" style="background-color:#eee">个人信息</a>
                    <a href="#" class="list-group-item">我的订单</a>
                </div>
    		</div><!--左侧导航栏结束-->
    		<div class="col-xs-9">
    		<p>&nbsp;</p><p>&nbsp;</p>
                {% for order in orders %}
                    <div id="myOrder" class="panel panel-default">
                        <div class="panel-heading">{{ order.id }}</div> 				
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>收货人</th>
                                    <th>订单金额（元）</th>
                                    <th>提交日期</th>
                                    <th>订单状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{{ order.user.name }}</td>
                                    <td>{{ order.order_price }}</td>
                                    <td>{{ order.date_created }}</td>
                                    <td>{{ order.status }}</td>
                                    <td>
                                        <a href="#display{{ order.id }}" data-toggle="modal">查看详情</a>
                                        {% if order.status in ['launch', 'confirm'] %}
                                        <a href="{{ url_for('order.order_cancel', id=order.id) }}">取消订单</a>
                                        {% elif order.status == 'dispatch' %}
                                        <a href="{{ url_for('order.order_success', id=order.id) }}">确认收货</a>
                                        <a href="{{ url_for('order.order_return', id=order.id) }}">申请退货</a>
                                        {% endif %}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="modal fade" id="display{{ order.id }}" tabindex="-1" role="dialog" >
                            <div class="modal-dialog">
                              <div class="modal-content">
                                 <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title">订单详情</h4>
                                 </div>
                                 <div class="modal-body">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>产品名称</th>
                                                <th>单价（元）</th>
                                                <th>产品数量</th>
                                                <th>金额（元）</th>
                                            </tr>
                                            {% for item in order.products %}
                                                <tr>
                                                    <td>{{ item.product.name }}</td>
                                                    <td>{{ item.product_price }}</td>
                                                    <td>{{ item.product_quantity }}</td>
                                                    <td>{{ item.product_price * item.product_quantity }}</td>
                                                </tr>
                                            {% endfor %}
                                        </thead>
                                    </table>
                                 </div>
                                 <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                 </div>
                              </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endblock %}
